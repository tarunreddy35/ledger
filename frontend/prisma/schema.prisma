generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Ledger {
  id          String   @id @default(cuid())
  date        DateTime
  description String
  amount      Float
  category    String?
  source      String
  createdAt   DateTime @default(now())

  emailReceipts EmailReceipt[] // ðŸ‘ˆ back-reference added
}

model BankTransaction {
  id            String   @id @default(cuid())
  date          DateTime
  description   String
  amount        Float
  balance       Float?
  source        String
  statementId   String     // ðŸ‘ˆ foreign key
  statement     BankStatement @relation(fields: [statementId], references: [id]) // ðŸ‘ˆ required relation
  createdAt     DateTime  @default(now())
}




model EmailReceipt {
  id          String   @id @default(cuid())
  subject     String
  sender      String
  date        DateTime
  pdfUrl      String
  extracted   Boolean  @default(false)
  confidence  Float?
  ledgerId    String?
  ledgerEntry Ledger?  @relation(fields: [ledgerId], references: [id])
}
